import{r as P,s as h,c as o,w as y,q as E,n as R,a as V,b as L,m as k,g as x}from"./vue.esm-bundler-DN3_H5t5.js";import{m as N,V as w}from"./VToolbar-w2Z7HW7E.js";import{a as M,u as U}from"./layout-BWfB5SPU.js";import{u as q,a as z}from"./proxiedModel-jyRWVYhQ.js";import{p as I,v as C,g as F}from"./defineComponent-CQcCBefB.js";import{u as O}from"./ssrBoot-CkAo57rc.js";import{u as W}from"./useRender-Dx5zp1wG.js";const Y=I({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function j(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:v}=b;let d=0,s=0;const e=P(null),u=h(0),r=h(0),m=h(0),p=h(!1),n=h(!1),c=o(()=>Number(l.scrollThreshold)),H=o(()=>C((c.value-u.value)/c.value||0)),f=()=>{const t=e.value;if(!t||v&&!v.value)return;d=u.value,u.value="window"in t?t.pageYOffset:t.scrollTop;const i=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(s!==i){s=i;return}n.value=u.value<d,m.value=Math.abs(u.value-c.value)};return y(n,()=>{r.value=r.value||u.value}),y(p,()=>{r.value=0}),E(()=>{y(()=>l.scrollTarget,t=>{var S;const i=t?document.querySelector(t):window;i&&i!==e.value&&((S=e.value)==null||S.removeEventListener("scroll",f),e.value=i,e.value.addEventListener("scroll",f,{passive:!0}))},{immediate:!0})}),R(()=>{var t;(t=e.value)==null||t.removeEventListener("scroll",f)}),v&&y(v,f,{immediate:!0}),{scrollThreshold:c,currentScroll:u,currentThreshold:m,isScrollActive:p,scrollRatio:H,isScrollingUp:n,savedScroll:r}}const D=I({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:l=>["top","bottom"].includes(l)},...N(),...M(),...Y(),height:{type:[Number,String],default:64}},"VAppBar"),$=F()({name:"VAppBar",props:D(),emits:{"update:modelValue":l=>!0},setup(l,b){let{slots:v}=b;const d=P(),s=q(l,"modelValue"),e=o(()=>{var g;const a=new Set(((g=l.scrollBehavior)==null?void 0:g.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),u=o(()=>{const a=e.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!s.value}),{currentScroll:r,scrollThreshold:m,isScrollingUp:p,scrollRatio:n}=j(l,{canScroll:u}),c=o(()=>e.value.hide||e.value.fullyHide),H=o(()=>l.collapse||e.value.collapse&&(e.value.inverted?n.value>0:n.value===0)),f=o(()=>l.flat||e.value.fullyHide&&!s.value||e.value.elevate&&(e.value.inverted?r.value>0:r.value===0)),t=o(()=>e.value.fadeImage?e.value.inverted?1-n.value:n.value:void 0),i=o(()=>{var B,T;if(e.value.hide&&e.value.inverted)return 0;const a=((B=d.value)==null?void 0:B.contentHeight)??0,g=((T=d.value)==null?void 0:T.extensionHeight)??0;return c.value?r.value<m.value||e.value.fullyHide?a+g:a:a+g});z(o(()=>!!l.scrollBehavior),()=>{x(()=>{c.value?e.value.inverted?s.value=r.value>m.value:s.value=p.value||r.value<m.value:s.value=!0})});const{ssrBootStyles:S}=O(),{layoutItemStyles:A}=U({id:l.name,order:o(()=>parseInt(l.order,10)),position:V(l,"location"),layoutSize:i,elementSize:h(void 0),active:s,absolute:V(l,"absolute")});return W(()=>{const a=w.filterProps(l);return L(w,k({ref:d,class:["v-app-bar",{"v-app-bar--bottom":l.location==="bottom"},l.class],style:[{...A.value,"--v-toolbar-image-opacity":t.value,height:void 0,...S.value},l.style]},a,{collapse:H.value,flat:f.value}),v)}),{}}});export{$ as V};
