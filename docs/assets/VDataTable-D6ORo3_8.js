import{r as H,c as F,g as be,x as w,w as he,b as d,t as ye,a as P,F as L,m as R}from"./vue.esm-bundler-DN3_H5t5.js";import{m as Pe,a as Te,c as De,p as Fe,u as Se,V as G}from"./VDataTableFooter-dwVuMJgF.js";import{m as ke,V as A}from"./VDataTableHeaders-DcG6xJJN.js";import{a as we,m as Ie,c as xe,p as Ve,u as Be,V as N}from"./VDataTableRows-BoDbQ1to.js";import{m as Me}from"./component-BzmGkC7Q.js";import{m as Oe,u as Ke}from"./density-CJzSG3iM.js";import{m as pe}from"./tag-CaUsCUob.js";import{m as je,p as Ce}from"./theme-ih7eM7Zv.js";import{p as x,w as _,L as I,d as Ee,l as He,g as Q,c as Le,a as Re}from"./defineComponent-CQcCBefB.js";import{u as U}from"./useRender-Dx5zp1wG.js";import{m as Ge,p as Ae}from"./VDataTableRow-BEyKnp0x.js";import{m as Ne,g as _e,h as We,c as Qe,a as Ue,u as ze,p as Je,b as Xe}from"./headers-Bd2sjvUy.js";import{a as Ye}from"./VSelect-y6VqIVHP.js";const Ze=(e,l,t)=>e==null||l==null?-1:e.toString().toLocaleLowerCase().indexOf(l.toString().toLocaleLowerCase()),$e=x({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function qe(e,l,t){var u;const a=[],s=(t==null?void 0:t.default)??Ze,n=t!=null&&t.filterKeys?_(t.filterKeys):!1,o=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return a;e:for(let r=0;r<e.length;r++){const[m,T=m]=_(e[r]),v={},g={};let c=-1;if((l||o>0)&&!(t!=null&&t.noFilter)){if(typeof m=="object"){const D=n||Object.keys(T);for(const i of D){const V=I(T,i),S=(u=t==null?void 0:t.customKeyFilter)==null?void 0:u[i];if(c=S?S(V,l,m):s(V,l,m),c!==-1&&c!==!1)S?v[i]=c:g[i]=c;else if((t==null?void 0:t.filterMode)==="every")continue e}}else c=s(m,l,m),c!==-1&&c!==!1&&(g.title=c);const h=Object.keys(g).length,y=Object.keys(v).length;if(!h&&!y||(t==null?void 0:t.filterMode)==="union"&&y!==o&&!h||(t==null?void 0:t.filterMode)==="intersection"&&(y!==o||!h))continue}a.push({index:r,matches:{...g,...v}})}return a}function et(e,l,t,a){const s=H([]),n=H(new Map),o=F(()=>a!=null&&a.transform?w(l).map(r=>[r,a.transform(r)]):w(l));be(()=>{const r=typeof t=="function"?t():w(t),m=typeof r!="string"&&typeof r!="number"?"":String(r),T=qe(o.value,m,{customKeyFilter:{...e.customKeyFilter,...w(a==null?void 0:a.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),v=w(l),g=[],c=new Map;T.forEach(h=>{let{index:y,matches:D}=h;const i=v[y];g.push(i),c.set(i.value,D)}),s.value=g,n.value=c});function u(r){return n.value.get(r.value)}return{filteredItems:s,filteredMatches:n,getMatches:u}}function tt(e){let{page:l,itemsPerPage:t,sortBy:a,groupBy:s,search:n}=e;const o=Ee("VDataTable"),u=F(()=>({page:l.value,itemsPerPage:t.value,sortBy:a.value,groupBy:s.value,search:n.value}));let r=null;he(u,()=>{He(r,u.value)||(r&&r.search!==u.value.search&&(l.value=1),o.emit("update:options",u.value),r=u.value)},{deep:!0,immediate:!0})}const z=x({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Me(),...Oe(),...pe(),...je()},"VTable"),W=Q()({name:"VTable",props:z(),setup(e,l){let{slots:t,emit:a}=l;const{themeClasses:s}=Ce(e),{densityClasses:n}=Ke(e);return U(()=>d(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!t.top,"v-table--has-bottom":!!t.bottom,"v-table--hover":e.hover},s.value,n.value,e.class],style:e.style},{default:()=>{var o,u,r;return[(o=t.top)==null?void 0:o.call(t),t.default?d("div",{class:"v-table__wrapper",style:{height:Le(e.height)}},[d("table",null,[t.default()])]):(u=t.wrapper)==null?void 0:u.call(t),(r=t.bottom)==null?void 0:r.call(t)]}})),{}}}),at=x({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function rt(e,l,t,a){const s=e.returnObject?l:I(l,e.itemValue),n=I(l,e.itemSelectable,!0),o=a.reduce((u,r)=>(r.key!=null&&(u[r.key]=I(l,r.value)),u),{});return{type:"item",key:e.returnObject?I(l,e.itemValue):s,index:t,value:s,selectable:n,columns:o,raw:l}}function lt(e,l,t){return l.map((a,s)=>rt(e,a,s,t))}function st(e,l){return{items:F(()=>lt(e,e.items,l.value))}}const ut=x({...we(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...Ge(),...Ie(),...Ne(),...at(),..._e(),...We(),...ke(),...z()},"DataTable"),nt=x({...Pe(),...ut(),...$e(),...Te()},"VDataTable"),Dt=Q()({name:"VDataTable",props:nt(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,l){let{attrs:t,slots:a}=l;const{groupBy:s}=xe(e),{sortBy:n,multiSort:o,mustSort:u}=Qe(e),{page:r,itemsPerPage:m}=De(e),{disableSort:T}=ye(e),{columns:v,headers:g,sortFunctions:c,sortRawFunctions:h,filterFunctions:y}=Ue(e,{groupBy:s,showSelect:P(e,"showSelect"),showExpand:P(e,"showExpand")}),{items:D}=st(e,v),i=P(e,"search"),{filteredItems:V}=et(e,D,i,{transform:b=>b.columns,customKeyFilter:y}),{toggleSort:S}=Xe({sortBy:n,multiSort:o,mustSort:u,page:r}),{sortByWithGroups:J,opened:X,extractRows:Y,isGroupOpen:Z,toggleGroup:$}=Ve({groupBy:s,sortBy:n,disableSort:T}),{sortedItems:q}=ze(e,V,J,{transform:b=>({...b.raw,...b.columns}),sortFunctions:c,sortRawFunctions:h}),{flatItems:O}=Be(q,s,X),ee=F(()=>O.value.length),{startIndex:te,stopIndex:ae,pageCount:re,setItemsPerPage:le}=Fe({page:r,itemsPerPage:m,itemsLength:ee}),{paginatedItems:B}=Se({items:O,startIndex:te,stopIndex:ae,itemsPerPage:m}),M=F(()=>Y(B.value)),{isSelected:se,select:ue,selectAll:ne,toggleSelect:oe,someSelected:ce,allSelected:me}=Je(e,{allItems:D,currentPage:M}),{isExpanded:de,toggleExpand:ie}=Ae(e);tt({page:r,itemsPerPage:m,sortBy:n,groupBy:s,search:i}),Re({VDataTableRows:{hideNoData:P(e,"hideNoData"),noDataText:P(e,"noDataText"),loading:P(e,"loading"),loadingText:P(e,"loadingText")}});const f=F(()=>({page:r.value,itemsPerPage:m.value,sortBy:n.value,pageCount:re.value,toggleSort:S,setItemsPerPage:le,someSelected:ce.value,allSelected:me.value,isSelected:se,select:ue,selectAll:ne,toggleSelect:oe,isExpanded:de,toggleExpand:ie,isGroupOpen:Z,toggleGroup:$,items:M.value.map(b=>b.raw),internalItems:M.value,groupedItems:B.value,columns:v.value,headers:g.value}));return U(()=>{const b=G.filterProps(e),fe=A.filterProps(e),ge=N.filterProps(e),ve=W.filterProps(e);return d(W,R({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},ve),{top:()=>{var k;return(k=a.top)==null?void 0:k.call(a,f.value)},default:()=>{var k,K,p,j,C,E;return a.default?a.default(f.value):d(L,null,[(k=a.colgroup)==null?void 0:k.call(a,f.value),!e.hideDefaultHeader&&d("thead",{key:"thead"},[d(A,fe,a)]),(K=a.thead)==null?void 0:K.call(a,f.value),!e.hideDefaultBody&&d("tbody",null,[(p=a["body.prepend"])==null?void 0:p.call(a,f.value),a.body?a.body(f.value):d(N,R(t,ge,{items:B.value}),a),(j=a["body.append"])==null?void 0:j.call(a,f.value)]),(C=a.tbody)==null?void 0:C.call(a,f.value),(E=a.tfoot)==null?void 0:E.call(a,f.value)])},bottom:()=>a.bottom?a.bottom(f.value):!e.hideDefaultFooter&&d(L,null,[d(Ye,null,null),d(G,b,{prepend:a["footer.prepend"]})])})}),{}}});export{W as V,tt as a,$e as b,et as c,Dt as d,ut as m,st as u};
