import{r as D,w as d,m as f,b as g,B as h}from"./vue.esm-bundler-DN3_H5t5.js";import{m as A,u as L,V as p}from"./VOverlay-BYqZ8jnc.js";import{f as w}from"./forwardRefs-C-GTDzx5.js";import{u as x}from"./proxiedModel-jyRWVYhQ.js";import{V as B}from"./dialog-transition-nz3-LZ1t.js";import{V as I}from"./VDefaultsProvider-B_mdbXeZ.js";import{p as S,g as F,I as R,q as T}from"./defineComponent-CQcCBefB.js";import{u as O}from"./useRender-Dx5zp1wG.js";const C=S({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...A({origin:"center center",scrollStrategy:"block",transition:{component:B},zIndex:2400})},"VDialog"),G=F()({name:"VDialog",props:C(),emits:{"update:modelValue":o=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(o,E){let{emit:m,slots:i}=E;const u=x(o,"modelValue"),{scopeId:V}=L(),e=D();function v(t){var n,s;const r=t.relatedTarget,l=t.target;if(r!==l&&((n=e.value)!=null&&n.contentEl)&&((s=e.value)!=null&&s.globalTop)&&![document,e.value.contentEl].includes(l)&&!e.value.contentEl.contains(l)){const a=T(e.value.contentEl);if(!a.length)return;const c=a[0],y=a[a.length-1];r===c?y.focus():c.focus()}}R&&d(()=>u.value&&o.retainFocus,t=>{t?document.addEventListener("focusin",v):document.removeEventListener("focusin",v)},{immediate:!0});function P(){var t;m("afterEnter"),(t=e.value)!=null&&t.contentEl&&!e.value.contentEl.contains(document.activeElement)&&e.value.contentEl.focus({preventScroll:!0})}function b(){m("afterLeave")}return d(u,async t=>{var r;t||(await h(),(r=e.value.activatorEl)==null||r.focus({preventScroll:!0}))}),O(()=>{const t=p.filterProps(o),r=f({"aria-haspopup":"dialog"},o.activatorProps),l=f({tabindex:-1},o.contentProps);return g(p,f({ref:e,class:["v-dialog",{"v-dialog--fullscreen":o.fullscreen,"v-dialog--scrollable":o.scrollable},o.class],style:o.style},t,{modelValue:u.value,"onUpdate:modelValue":n=>u.value=n,"aria-modal":"true",activatorProps:r,contentProps:l,role:"dialog",onAfterEnter:P,onAfterLeave:b},V),{activator:i.activator,default:function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return g(I,{root:"VDialog"},{default:()=>{var c;return[(c=i.default)==null?void 0:c.call(i,...s)]}})}})}),w({},e)}});export{G as V,C as m};
