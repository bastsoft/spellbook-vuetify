import{u as V}from"./proxiedModel-jyRWVYhQ.js";import{p as I,e as B,a as b,c as m,n as w,w as E,f as P,q as U,z as k,x as q}from"./vue.esm-bundler-DN3_H5t5.js";import{p as y,d as C,h as A,l as M,i as $,w as F}from"./defineComponent-CQcCBefB.js";const W=y({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),D=y({value:null,disabled:Boolean,selectedClass:String},"group-item");function H(l,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=C("useGroupItem");if(!n)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const t=A();I(Symbol.for(`${a.description}:id`),t);const s=B(a,null);if(!s){if(!r)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${a.description}`)}const g=b(l,"value"),h=m(()=>!!(s.disabled.value||l.disabled));s.register({id:t,value:g,disabled:h},n),w(()=>{s.unregister(t)});const f=m(()=>s.isSelected(t)),x=m(()=>s.items.value[0].id===t),v=m(()=>s.items.value[s.items.value.length-1].id===t),p=m(()=>f.value&&[s.selectedClass.value,l.selectedClass]);return E(f,e=>{n.emit("group:selected",{value:e})},{flush:"sync"}),{id:t,isSelected:f,isFirst:x,isLast:v,toggle:()=>s.select(t,!f.value),select:e=>s.select(t,e),selectedClass:p,value:g,disabled:h,group:s}}function J(l,a){let r=!1;const n=P([]),t=V(l,"modelValue",[],e=>e==null?[]:S(n,F(e)),e=>{const i=L(n,e);return l.multiple?i:i[0]}),s=C("useGroup");function g(e,i){const d=e,u=Symbol.for(`${a.description}:id`),c=$(u,s==null?void 0:s.vnode).indexOf(i);q(d.value)==null&&(d.value=c,d.useIndexAsValue=!0),c>-1?n.splice(c,0,d):n.push(d)}function h(e){if(r)return;f();const i=n.findIndex(d=>d.id===e);n.splice(i,1)}function f(){const e=n.find(i=>!i.disabled);e&&l.mandatory==="force"&&!t.value.length&&(t.value=[e.id])}U(()=>{f()}),w(()=>{r=!0}),k(()=>{for(let e=0;e<n.length;e++)n[e].useIndexAsValue&&(n[e].value=e)});function x(e,i){const d=n.find(u=>u.id===e);if(!(i&&(d!=null&&d.disabled)))if(l.multiple){const u=t.value.slice(),o=u.findIndex(G=>G===e),c=~o;if(i=i??!c,c&&l.mandatory&&u.length<=1||!c&&l.max!=null&&u.length+1>l.max)return;o<0&&i?u.push(e):o>=0&&!i&&u.splice(o,1),t.value=u}else{const u=t.value.includes(e);if(l.mandatory&&u)return;t.value=i??!u?[e]:[]}}function v(e){if(l.multiple,t.value.length){const i=t.value[0],d=n.findIndex(c=>c.id===i);let u=(d+e)%n.length,o=n[u];for(;o.disabled&&u!==d;)u=(u+e)%n.length,o=n[u];if(o.disabled)return;t.value=[n[u].id]}else{const i=n.find(d=>!d.disabled);i&&(t.value=[i.id])}}const p={register:g,unregister:h,selected:t,select:x,disabled:b(l,"disabled"),prev:()=>v(n.length-1),next:()=>v(1),isSelected:e=>t.value.includes(e),selectedClass:m(()=>l.selectedClass),items:m(()=>n),getItemIndex:e=>z(n,e)};return I(a,p),p}function z(l,a){const r=S(l,[a]);return r.length?l.findIndex(n=>n.id===r[0]):-1}function S(l,a){const r=[];return a.forEach(n=>{const t=l.find(g=>M(n,g.value)),s=l[n];(t==null?void 0:t.value)!=null?r.push(t.id):s!=null&&r.push(s.id)}),r}function L(l,a){const r=[];return a.forEach(n=>{const t=l.findIndex(s=>s.id===n);if(~t){const s=l[t];r.push(s.value!=null?s.value:t)}}),r}export{D as a,H as b,W as m,J as u};
