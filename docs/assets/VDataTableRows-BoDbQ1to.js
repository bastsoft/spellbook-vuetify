import{r as E,c as V,p as H,e as _,b as u,L as T,m as P,F as G}from"./vue.esm-bundler-DN3_H5t5.js";import{e as S,f as B,V as F}from"./headers-Bd2sjvUy.js";import{u as N}from"./proxiedModel-jyRWVYhQ.js";import{x as A,p as x,o as M,g as R}from"./defineComponent-CQcCBefB.js";import{V as L}from"./VBtn-D_tqydEW.js";import{V as U}from"./VCheckboxBtn-CSn5bCvD.js";import{u as W,V as q}from"./VDataTableRow-BEyKnp0x.js";import{m as z,u as J}from"./display-CXz21PgD.js";import{u as K}from"./locale-BPiAokE7.js";import{u as Q}from"./useRender-Dx5zp1wG.js";function I(t,o,a){return Object.keys(t).filter(e=>A(e)&&e.endsWith(o)).reduce((e,n)=>(e[n.slice(0,-o.length)]=i=>t[n](i,a(i)),e),{})}const ce=x({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),O=Symbol.for("vuetify:data-table-group");function pe(t){return{groupBy:N(t,"groupBy")}}function me(t){const{disableSort:o,groupBy:a,sortBy:e}=t,n=E(new Set),i=V(()=>a.value.map(r=>({...r,order:r.order??!1})).concat(o!=null&&o.value?[]:e.value));function d(r){return n.value.has(r.id)}function p(r){const c=new Set(n.value);d(r)?c.delete(r.id):c.add(r.id),n.value=c}function g(r){function c(h){const f=[];for(const l of h.items)"type"in l&&l.type==="group"?f.push(...c(l)):f.push(l);return f}return c({type:"group",items:r,id:"dummy",key:"dummy",value:"dummy",depth:0})}const m={sortByWithGroups:i,toggleGroup:p,opened:n,groupBy:a,extractRows:g,isGroupOpen:d};return H(O,m),m}function $(){const t=_(O);if(!t)throw new Error("Missing group!");return t}function X(t,o){if(!t.length)return[];const a=new Map;for(const e of t){const n=M(e.raw,o);a.has(n)||a.set(n,[]),a.get(n).push(e)}return a}function C(t,o){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!o.length)return[];const n=X(t,o[0]),i=[],d=o.slice(1);return n.forEach((p,g)=>{const m=o[0],r=`${e}_${m}_${g}`;i.push({depth:a,id:r,key:m,value:g,items:d.length?C(p,d,a+1,r):p,type:"group"})}),i}function j(t,o){const a=[];for(const e of t)"type"in e&&e.type==="group"?(e.value!=null&&a.push(e),(o.has(e.id)||e.value==null)&&a.push(...j(e.items,o))):a.push(e);return a}function ge(t,o,a){return{flatItems:V(()=>{if(!o.value.length)return t.value;const n=C(t.value,o.value.map(i=>i.key));return j(n,a.value)})}}const Y=x({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Z=R()({name:"VDataTableGroupHeaderRow",props:Y(),setup(t,o){let{slots:a}=o;const{isGroupOpen:e,toggleGroup:n,extractRows:i}=$(),{isSelected:d,isSomeSelected:p,select:g}=S(),{columns:m}=B(),r=V(()=>i([t.item]));return()=>u("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":t.item.depth}},[m.value.map(c=>{var h,f;if(c.key==="data-table-group"){const l=e(t.item)?"$expand":"$next",y=()=>n(t.item);return((h=a["data-table-group"])==null?void 0:h.call(a,{item:t.item,count:r.value.length,props:{icon:l,onClick:y}}))??u(F,{class:"v-data-table-group-header-row__column"},{default:()=>[u(L,{size:"small",variant:"text",icon:l,onClick:y},null),u("span",null,[t.item.value]),u("span",null,[T("("),r.value.length,T(")")])]})}if(c.key==="data-table-select"){const l=d(r.value),y=p(r.value)&&!l,s=b=>g(r.value,b);return((f=a["data-table-select"])==null?void 0:f.call(a,{props:{modelValue:l,indeterminate:y,"onUpdate:modelValue":s}}))??u("td",null,[u(U,{modelValue:l,indeterminate:y,"onUpdate:modelValue":s},null)])}return u("td",null,null)})])}}),ee=x({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...z()},"VDataTableRows"),fe=R()({name:"VDataTableRows",inheritAttrs:!1,props:ee(),setup(t,o){let{attrs:a,slots:e}=o;const{columns:n}=B(),{expandOnClick:i,toggleExpand:d,isExpanded:p}=W(),{isSelected:g,toggleSelect:m}=S(),{toggleGroup:r,isGroupOpen:c}=$(),{t:h}=K(),{mobile:f}=J(t);return Q(()=>{var l,y;return t.loading&&(!t.items.length||e.loading)?u("tr",{class:"v-data-table-rows-loading",key:"loading"},[u("td",{colspan:n.value.length},[((l=e.loading)==null?void 0:l.call(e))??h(t.loadingText)])]):!t.loading&&!t.items.length&&!t.hideNoData?u("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[u("td",{colspan:n.value.length},[((y=e["no-data"])==null?void 0:y.call(e))??h(t.noDataText)])]):u(G,null,[t.items.map((s,b)=>{var k;if(s.type==="group"){const D={index:b,item:s,columns:n.value,isExpanded:p,toggleExpand:d,isSelected:g,toggleSelect:m,toggleGroup:r,isGroupOpen:c};return e["group-header"]?e["group-header"](D):u(Z,P({key:`group-header_${s.id}`,item:s},I(a,":group-header",()=>D)),e)}const v={index:b,item:s.raw,internalItem:s,columns:n.value,isExpanded:p,toggleExpand:d,isSelected:g,toggleSelect:m},w={...v,props:P({key:`item_${s.key??s.index}`,onClick:i.value?()=>{d(s)}:void 0,index:b,item:s,cellProps:t.cellProps,mobile:f.value},I(a,":row",()=>v),typeof t.rowProps=="function"?t.rowProps({item:v.item,index:v.index,internalItem:v.internalItem}):t.rowProps)};return u(G,{key:w.props.key},[e.item?e.item(w):u(q,w.props,e),p(s)&&((k=e["expanded-row"])==null?void 0:k.call(e,v))])})])}),{}}});export{fe as V,ee as a,pe as c,ce as m,me as p,ge as u};
