import{t as ue,a as r,c as h,s as x,b as t,m}from"./vue.esm-bundler-DN3_H5t5.js";import{m as ie,b as ce,u as me,c as ve,a as ge,V as D}from"./VDataTable-D6ORo3_8.js";import{V as I}from"./VDataTableHeaders-DcG6xJJN.js";import{p as he,V as be}from"./VDataTableRow-BEyKnp0x.js";import{m as fe,c as pe,p as ye,u as Ve,V as w}from"./VDataTableRows-BoDbQ1to.js";import{m as Te,u as xe,b as De}from"./VSelect-y6VqIVHP.js";import{c as Ie,a as we,u as Se,p as Re,b as Pe}from"./headers-Bd2sjvUy.js";import{p as ke,g as Be,a as Fe,c as b}from"./defineComponent-CQcCBefB.js";import{u as Ge}from"./useRender-Dx5zp1wG.js";const Ee=ke({...ie(),...fe(),...Te(),...ce()},"VDataTableVirtual"),We=Be()({name:"VDataTableVirtual",props:Ee(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,S){let{attrs:R,slots:a}=S;const{groupBy:d}=pe(e),{sortBy:u,multiSort:P,mustSort:k}=Ie(e),{disableSort:B}=ue(e),{columns:i,headers:F,filterFunctions:G,sortFunctions:E,sortRawFunctions:H}=we(e,{groupBy:d,showSelect:r(e,"showSelect"),showExpand:r(e,"showExpand")}),{items:N}=me(e,i),f=r(e,"search"),{filteredItems:O}=ve(e,N,f,{transform:l=>l.columns,customKeyFilter:G}),{toggleSort:U}=Pe({sortBy:u,multiSort:P,mustSort:k}),{sortByWithGroups:_,opened:z,extractRows:A,isGroupOpen:C,toggleGroup:K}=ye({groupBy:d,sortBy:u,disableSort:B}),{sortedItems:W}=Se(e,O,_,{transform:l=>({...l.raw,...l.columns}),sortFunctions:E,sortRawFunctions:H}),{flatItems:v}=Ve(W,d,z),c=h(()=>A(v.value)),{isSelected:j,select:q,selectAll:J,toggleSelect:L,someSelected:M,allSelected:Q}=Re(e,{allItems:c,currentPage:c}),{isExpanded:X,toggleExpand:Y}=he(e),{containerRef:Z,markerRef:$,paddingTop:ee,paddingBottom:ae,computedItems:te,handleItemResize:le,handleScroll:oe,handleScrollend:re}=xe(e,v),se=h(()=>te.value.map(l=>l.raw));ge({sortBy:u,page:x(1),itemsPerPage:x(-1),groupBy:d,search:f}),Fe({VDataTableRows:{hideNoData:r(e,"hideNoData"),noDataText:r(e,"noDataText"),loading:r(e,"loading"),loadingText:r(e,"loadingText")}});const n=h(()=>({sortBy:u.value,toggleSort:U,someSelected:M.value,allSelected:Q.value,isSelected:j,select:q,selectAll:J,toggleSelect:L,isExpanded:X,toggleExpand:Y,isGroupOpen:C,toggleGroup:K,items:c.value.map(l=>l.raw),internalItems:c.value,groupedItems:v.value,columns:i.value,headers:F.value}));Ge(()=>{const l=I.filterProps(e),ne=w.filterProps(e),de=D.filterProps(e);return t(D,m({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},de),{top:()=>{var o;return(o=a.top)==null?void 0:o.call(a,n.value)},wrapper:()=>{var o,p,y;return t("div",{ref:Z,onScrollPassive:oe,onScrollend:re,class:"v-table__wrapper",style:{height:b(e.height)}},[t("table",null,[(o=a.colgroup)==null?void 0:o.call(a,n.value),!e.hideDefaultHeader&&t("thead",{key:"thead"},[t(I,m(l,{sticky:e.fixedHeader}),a)]),!e.hideDefaultBody&&t("tbody",null,[t("tr",{ref:$,style:{height:b(ee.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(p=a["body.prepend"])==null?void 0:p.call(a,n.value),t(w,m(R,ne,{items:se.value}),{...a,item:s=>t(De,{key:s.internalItem.index,renderless:!0,"onUpdate:height":g=>le(s.internalItem.index,g)},{default:g=>{var T;let{itemRef:V}=g;return((T=a.item)==null?void 0:T.call(a,{...s,itemRef:V}))??t(be,m(s.props,{ref:V,key:s.internalItem.index,index:s.internalItem.index}),a)}})}),(y=a["body.append"])==null?void 0:y.call(a,n.value),t("tr",{style:{height:b(ae.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var o;return(o=a.bottom)==null?void 0:o.call(a,n.value)}})})}});export{We as V};
